<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>A Basic HTML5 Template</title>
  <meta name="description" content="A simple HTML5 Template for new projects.">
  <meta name="author" content="SitePoint">

  <meta property="og:title" content="A Basic HTML5 Template">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.sitepoint.com/a-basic-html5-template/">
  <meta property="og:description" content="A simple HTML5 Template for new projects.">
  <meta property="og:image" content="image.png">

  <link rel="icon" href="/favicon.ico">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link rel="stylesheet" href="css/styles.css?v=1.0">
  
</head>

<body>
  <ui-form>
    <form class="m-32 h-328 flex flex-col justify-between">
      <div class="flex justify-between w-full">
        <ui-text id="question" value="Ваша подборка готова! 🥳 Куда нам отправить её?"></ui-text>
        <ui-text data-id="step" value="Шаг 9/9" type="secondary"></ui-text>
      </div>
      <div id="field" class="flex wrap w-512 h-184 mt-24 justify-between aligin-between">
        <ui-input type="text" value="Как вас зовут?" id="whats-u-name"></ui-input>
        <ui-input type="tel" value="Номер телефона" id="phone"></ui-input>
        <ui-input type="email" value="E-mail" id="e-mail"></ui-input>
      </div>
      <div class="flex flex-col justify-between">
        <ui-button id="endpoint" value="Получить подборку" type="primary" class="flex justify-end w-full"></ui-button>
        <div class="flex flex-row private-data">
          <ui-text value="Нажимая на кнопку, вы даете согласие на обработку своих &nbsp;" type="secondary"></ui-text>
          <ui-link value="Персональных данных"></ui-link>
        </div>
      </div>
  </form>
  </ui-form>
  <script src="bundle.js"></script>
  <script>
    setTimeout(() => {
      fetch('response.json')
          .then(res => res.json())
          .then(data => {
            document.getElementById('whats-u-name').getElementsByTagName('input')[0].value = data.name;
            document.getElementById('phone').getElementsByTagName('input')[0].value = data.phone;
            document.getElementById('e-mail').getElementsByTagName('input')[0].value = data.mail;
          });
      document.getElementById('endpoint').addEventListener('click', (e) => {
        if (
          document.getElementById('whats-u-name').getElementsByTagName('input')[0].value &&
          document.getElementById('phone').getElementsByTagName('input')[0].value &&
          document.getElementById('e-mail').getElementsByTagName('input')[0].value
        ) {
          alert('Whooo!');
        }
      }, 1000);
      const collection = document.getElementsByTagName('ui-radio-button');
      if (collection.length) {
        [...collection].forEach((radio) => {
          radio.getElementsByClassName('radio')[0].addEventListener('click', (e) => {
            [...collection].forEach(el => {
                el.getElementsByClassName('ui-radio-button')[0].classList.remove('selected');
                el.getElementsByClassName('radio')[0].classList.remove('selected');
            });
            radio.getElementsByClassName('ui-radio-button')[0].classList.add('selected');
            radio.getElementsByClassName('radio')[0].classList.add('selected');
            document.getElementById('endpoint').setAttribute('name', 'done');
          });
        });
      }
    }, 1000);
</script>
</body>
</html>
